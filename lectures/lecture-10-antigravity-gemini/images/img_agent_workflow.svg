<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Agent System Subgraph Box -->
  <rect x="150" y="80" width="500" height="420" rx="10" ry="10" fill="#f9f9f9" stroke="#333" stroke-dasharray="5,5" />
  <text x="400" y="110" text-anchor="middle" font-family="sans-serif" font-size="16" font-weight="bold">Agent System</text>

  <!-- Nodes -->
  <!-- User -->
  <circle cx="80" cy="150" r="40" fill="#fff" stroke="#333" stroke-width="2" />
  <text x="80" y="155" text-anchor="middle" font-family="sans-serif" font-size="14">User</text>

  <!-- Memory (Database shape) -->
  <path d="M600 130 c0 -10 40 -10 40 0 v60 c0 10 -40 10 -40 0 v-60 z" fill="#f9f" stroke="#333" stroke-width="2" />
  <ellipse cx="620" cy="130" rx="20" ry="5" fill="none" stroke="#333" stroke-width="2" />
  <text x="620" y="165" text-anchor="middle" font-family="sans-serif" font-size="12">Memory</text>
  <text x="620" y="180" text-anchor="middle" font-family="sans-serif" font-size="10">(기억/맥락)</text>

  <!-- Plan -->
  <rect x="250" y="130" width="120" height="50" rx="5" ry="5" fill="#bbf" stroke="#333" stroke-width="2" />
  <text x="310" y="155" text-anchor="middle" font-family="sans-serif" font-size="14">Planning</text>
  <text x="310" y="170" text-anchor="middle" font-family="sans-serif" font-size="10">(계획 수립)</text>

  <!-- Confirm (Rhombus) -->
  <polygon points="310,220 370,260 310,300 250,260" fill="#fff" stroke="#333" stroke-width="2" />
  <text x="310" y="260" text-anchor="middle" font-family="sans-serif" font-size="12">Confirm</text>
  <text x="310" y="275" text-anchor="middle" font-family="sans-serif" font-size="10">(사용자 확인)</text>

  <!-- Exec -->
  <rect x="250" y="340" width="120" height="50" rx="5" ry="5" fill="#bfb" stroke="#333" stroke-width="2" />
  <text x="310" y="365" text-anchor="middle" font-family="sans-serif" font-size="14">Execution</text>
  <text x="310" y="380" text-anchor="middle" font-family="sans-serif" font-size="10">(도구 실행)</text>

  <!-- Tools -->
  <rect x="560" y="340" width="80" height="50" rx="0" ry="0" fill="#eee" stroke="#333" stroke-width="2" />
  <text x="600" y="370" text-anchor="middle" font-family="sans-serif" font-size="14">Tools</text>

  <!-- Verify (Rhombus) -->
  <polygon points="310,430 370,470 310,510 250,470" fill="#fff" stroke="#333" stroke-width="2" />
  <text x="310" y="470" text-anchor="middle" font-family="sans-serif" font-size="12">Verification</text>
  <text x="310" y="485" text-anchor="middle" font-family="sans-serif" font-size="10">(검증)</text>

  <!-- Done -->
  <circle cx="310" cy="560" r="30" fill="#fff" stroke="#333" stroke-width="2" />
  <circle cx="310" cy="560" r="25" fill="none" stroke="#333" stroke-width="1" />
  <text x="310" y="565" text-anchor="middle" font-family="sans-serif" font-size="12">Done</text>

  <!-- Edges -->
  <!-- User -> Plan -->
  <line x1="120" y1="150" x2="240" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="180" y="145" text-anchor="middle" font-family="sans-serif" font-size="10">1. 요구사항</text>

  <!-- Plan <-> Memory -->
  <line x1="370" y1="155" x2="590" y2="155" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" marker-start="url(#arrowhead)" />

  <!-- Plan -> Confirm -->
  <line x1="310" y1="180" x2="310" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="315" y="205" text-anchor="start" font-family="sans-serif" font-size="10">2. 계획 제안</text>

  <!-- Confirm -> Plan (Feedback) -->
  <path d="M250 260 Q 200 260 200 200 Q 200 155 240 155" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="190" y="230" text-anchor="end" font-family="sans-serif" font-size="10">피드백/수정</text>

  <!-- Confirm -> Exec -->
  <line x1="310" y1="300" x2="310" y2="340" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="315" y="325" text-anchor="start" font-family="sans-serif" font-size="10">3. 승인</text>

  <!-- Exec <-> Memory -->
  <path d="M370 365 Q 620 365 620 200" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" marker-start="url(#arrowhead)" />

  <!-- Exec <-> Tools -->
  <line x1="370" y1="365" x2="550" y2="365" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" marker-start="url(#arrowhead)" />
  <text x="460" y="360" text-anchor="middle" font-family="sans-serif" font-size="10">4. 도구 사용</text>

  <!-- Exec -> Verify -->
  <line x1="310" y1="390" x2="310" y2="430" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="315" y="415" text-anchor="start" font-family="sans-serif" font-size="10">5. 결과 검증</text>

  <!-- Verify -> Plan (Fail) -->
  <path d="M250 470 Q 150 470 150 310 Q 150 155 240 155" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="160" y="400" text-anchor="end" font-family="sans-serif" font-size="10">실패</text>

  <!-- Verify -> Done -->
  <line x1="310" y1="510" x2="310" y2="530" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="315" y="525" text-anchor="start" font-family="sans-serif" font-size="10">6. 성공</text>

</svg>
